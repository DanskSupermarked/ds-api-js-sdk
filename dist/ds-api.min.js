!function(t,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var r={exports:{}};e(r.exports),t.dsApi=r.exports}}(this,function(t){"use strict";var e="1.0.2";t.VERSION=e;var r,n,a="https://api.dansksupermarked.dk",o=100,u="v1",i=function(t,e){if(0===Object.keys(e).length)return t;if(-1!==t.indexOf("?")){var r=t.split("?");t=r[0],r[1].split("&").forEach(function(t){var r=t.split("="),n=r[0];!e[n]&&r.length>1&&(e[n]=r[1])})}var n=[];return Object.keys(e).forEach(function(t){var r=e[t];n.push(""+t+"="+r)}),n.length>0?t+"?"+n.join("&"):t},s=function(t){if(t){var e={};return t.split(",").forEach(function(t){var r=t.split(";"),a=r[0].replace(/<(.*)>/,"$1").trim(),o=r[1].replace(/rel="(.*)"/,"$1").trim();e[o]=function(){return n(a)}}),e}},c=function(t){r=t};t.auth=c;var f=function(t){u=t};t.setApiVersion=f;var n=function(t){var e=void 0===arguments[1]?"GET":arguments[1],n=void 0===arguments[2]?{}:arguments[2],o=void 0===arguments[3]?null:arguments[3];if(!r)return Promise.reject(new Error("authentication key was not set. Use the auth method"));if(!t)return Promise.reject(new TypeError("needs a `resource` string as first parameter."));var c;t.startsWith(a)?c=t:(t.startsWith("/")||(t="/"+t),t.startsWith("/"+u)||(t="/"+u+t),c=a+t);var f=i(c,n);return fetch(f,{method:e,headers:{Authorization:"Basic "+btoa(""+r+":js-sdk"),"Content-Type":"application/json; charset=utf-8"},data:o}).then(function(t){var r=function(e){var r={};return t.headers.forEach(function(t,e){r[e.toLowerCase()]=t}),{data:e,status:t.status,headers:r,count:parseInt(t.headers.get("x-total-count"),10)||1,pagination:s(t.headers.get("link")),url:f}};return"HEAD"===e?r():t.json().then(r)})};t.request=n;var h=function(t,e){return n(t,"GET",e)};t.get=h;var p=function(t,e){return n(t,"POST",{},e)};t.post=p;var v=function(t,e){return n(t,"PUT",{},e)};t.put=v;var d=function(t){return n(t,"DELETE")};t.del=d;var l=function(t){var e=void 0===arguments[1]?{}:arguments[1];return n(t,"HEAD",e).then(function(t){return Promise.resolve(t.headers["x-total-count"]?parseInt(t.headers["x-total-count"],10):0)})};t.count=l;var m=function(t){var e=void 0===arguments[1]?{}:arguments[1];return l(t,e).then(function(e){if(0===e)return Promise.resolve([]);for(var r=Math.ceil(e/o),a=[],u=[],i=function(e){var r={};r.per_page=o,r.page=e,a.push(n(t,"GET",r).then(function(t){return 200!==t.status?Promise.reject(t):void(u[e-1]=t.data)}))},s=1;r>=s;s++)i(s);return Promise.all(a).then(function(){return u.reduce(function(t,e){return t.concat(e)})})["catch"](function(t){return t})})};t.getAll=m});