!function(t,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var r={exports:{}};e(r.exports),t.dsApi=r.exports}}(this,function(t){"use strict";var e="1.0.0";t.VERSION=e;var r,n,a="https://api.dansksupermarked.dk/",u=100,i="v1",o=function(t,e){if(0===Object.keys(e).length)return t;if(-1!==t.indexOf("?")){var r=t.split("?");t=r[0],r[1].split("&").forEach(function(t){var r=t.split("="),n=r[0];!e[n]&&r.length>1&&(e[n]=r[1])})}var n=[];return Object.keys(e).forEach(function(t){var r=e[t];n.push(""+t+"="+r)}),n.length>0?t+"?"+n.join("&"):t},s=function(t){if(t){var e={};return t.split(",").forEach(function(t){var r=t.split(";"),a=r[0].replace(/<(.*)>/,"$1").trim(),u=r[1].replace(/rel="(.*)"/,"$1").trim();e[u]=function(){return n(a)}}),e}},c=function(t){r=t};t.auth=c;var f=function(t){i=t};t.setApiVersion=f;var n=function(t){var e=void 0===arguments[1]?"GET":arguments[1],n=void 0===arguments[2]?{}:arguments[2],u=void 0===arguments[3]?null:arguments[3];if(!r)return Promise.reject(new Error("authentication key was not set. Use the auth method"));if(!t)return Promise.reject(new TypeError("needs a `resource` string as first parameter."));var c=t.startsWith(a)?t:""+a+i+"/"+t,f=o(c,n);return fetch(f,{method:e,headers:{Authorization:"Basic "+btoa(""+r+":js-sdk"),"Content-Type":"application/json; charset=utf-8"},data:u}).then(function(t){return t.json().then(function(e){return{data:e,status:t.status,headers:t.headers,count:parseInt(t.headers["x-total-count"],10)||1,pagination:s(t.headers.link),url:f}})})};t.request=n;var p=function(t,e){return n(t,"GET",e)};t.get=p;var h=function(t,e){return n(t,"POST",{},e)};t.post=h;var d=function(t,e){return n(t,"PUT",{},e)};t.put=d;var v=function(t){return n(t,"DELETE")};t.del=v;var l=function(t){var e=void 0===arguments[1]?{}:arguments[1];return e.per_page=1,e.page=1,n(t,"GET",e).then(function(t){return 200!==t.status?Promise.reject(t):parseInt(t.headers["x-total-count"],10)||1})};t.count=l;var g=function(t){var e=void 0===arguments[1]?{}:arguments[1];return e.per_page=1,e.page=1,n(t,"GET",e).then(function(e){if(delete e.pagination,delete e.url,200!==e.status)return Promise.reject(e);for(var r=Math.ceil(e.count/u),a=[],i=[],o=function(e){var r={};r.per_page=u,r.page=e,a.push(n(t,"GET",r).then(function(t){return 200!==t.status?Promise.reject(t):void(i[e-1]=t.data)}))},s=1;r>=s;s++)o(s);return Promise.all(a).then(function(){e.data=[],i.forEach(function(t){return t.forEach(function(t){return e.data.push(t)})})}).then(function(){return e})["catch"](function(t){return t})})};t.getAll=g});