!function(t,r){if("function"==typeof define&&define.amd)define(["exports"],r);else if("undefined"!=typeof exports)r(exports);else{var e={exports:{}};r(e.exports),t.dsApi=e.exports}}(this,function(t){"use strict";var r="1.0.3";t.VERSION=r;var e,n,a="https://api.dansksupermarked.dk",i=100,o="v1",u=function(t,r){if(0===Object.keys(r).length)return t;if(-1!==t.indexOf("?")){var e=t.split("?");t=e[0],e[1].split("&").forEach(function(t){var e=t.split("="),n=e[0];!r[n]&&e.length>1&&(r[n]=e[1])})}var n=[];return Object.keys(r).forEach(function(t){var e=r[t];e&&n.push(""+t+"="+e)}),n.length>0?t+"?"+n.join("&"):t},s=function(t){if(t){var r={};return t.split(",").forEach(function(t){var e=t.split(";"),a=e[0].replace(/<(.*)>/,"$1").trim(),i=e[1].replace(/rel="(.*)"/,"$1").trim();r[i]=function(){return n(a)}}),r}},c=function(t){e=t};t.auth=c;var f=function(t){o=t};t.setApiVersion=f;var n=function(t){var r=void 0===arguments[1]?"GET":arguments[1],n=void 0===arguments[2]?{}:arguments[2],i=void 0===arguments[3]?null:arguments[3];if(!e)return Promise.reject(new Error("authentication key was not set. Use the auth method"));if(!t)return Promise.reject(new TypeError("needs a `resource` string as first parameter."));var c;t.startsWith(a)?c=t:(t.startsWith("/")||(t="/"+t),t.startsWith("/"+o)||(t="/"+o+t),c=a+t);var f=u(c,n);return fetch(f,{method:r,headers:{Authorization:"Basic "+btoa(""+e+":js-sdk"),"Content-Type":"application/json; charset=utf-8"},data:i}).then(function(t){var e=function(r){var e={};return t.headers.forEach(function(t,r){if(Array.isArray(r)){var n=r;r=t,t=n}e[r.toLowerCase()]=t}),{data:r,status:t.status,headers:e,count:parseInt(t.headers.get("x-total-count"),10)||1,pagination:s(t.headers.get("link")),url:f}};return"HEAD"===r?e():t.json().then(e)})};t.request=n;var h=function(t,r){return n(t,"GET",r)};t.get=h;var v=function(t,r){return n(t,"POST",{},r)};t.post=v;var p=function(t,r){return n(t,"PUT",{},r)};t.put=p;var d=function(t){return n(t,"DELETE")};t.del=d;var l=function(t){var r=void 0===arguments[1]?{}:arguments[1];return n(t,"HEAD",r).then(function(t){return Promise.resolve(t.headers["x-total-count"]?parseInt(t.headers["x-total-count"],10):0)})};t.count=l;var m=function(t){var r=void 0===arguments[1]?{}:arguments[1];return l(t,r).then(function(r){if(0===r)return Promise.resolve([]);for(var e=Math.ceil(r/i),a=[],o=[],u=function(r){var e={};e.per_page=i,e.page=r,a.push(n(t,"GET",e).then(function(t){return 200!==t.status?Promise.reject(t):void(o[r-1]=t.data)}))},s=1;e>=s;s++)u(s);return Promise.all(a).then(function(){return o.reduce(function(t,r){return t.concat(r)})})["catch"](function(t){return t})})};t.getAll=m});